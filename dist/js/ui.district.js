!function(e){function t(t,i){if(this.options=i,this.element=e(t),this.province=this.element.find(".province"),this.city=this.element.find(".city"),this.county=this.element.find(".county"),i.value){var a=C.area.getProvinceByAreaCode(i.value),r=C.area.getCityByAreaCode(i.value),n=C.area.getAreaByCode(i.value);this._renderProvince(C.area.getProvinceList(),a.code),this._renderCity(C.area.getCityList(a.code),r.code),this._renderCounty(C.area.getAreaList(r.code),n.code)}else this._renderProvince(C.area.getProvinceList());this._bind(),this.options.show&&this.show()}var i={value:"",show:!0,itemHeight:40},a='<div class="area-modal">   <div class="area-backdrop">点击此处取消选择</div>   <div class="area-dialog">      <div class="area-list area-province border-r">           <div class="area-title border-b">省份</div>           <div class="area-content">               <ul class="province">               </ul>           </div>       </div>       <div class="area-list area-city border-r">           <div class="area-title border-b">城市</div>           <div class="area-content">               <ul class="city">               </ul>           </div>       </div>       <div class="area-list area-county">           <div class="area-title border-b">区/县</div>           <div class="area-content">               <ul class="county">               </ul>           </div>       </div>   </div></div>';t.prototype={_bind:function(){var t=this;this.element.children(".area-backdrop").on("touchend",function(e){t.hide(),e.preventDefault()}),this.province.on("tap","li",function(i){var a=e(this),r=a.attr("code");a.addClass("active").siblings().removeClass("active"),t._renderCity(C.area.getCityList(r)||[]),t._renderCounty([]),i.preventDefault()}),this.city.on("tap","li",function(i){var a=e(this),r=a.attr("code");a.addClass("active").siblings().removeClass("active"),t._renderCounty(C.area.getAreaList(r)||[]),i.preventDefault()}),this.county.on("tap","li",function(i){var a=e(this),r=a.attr("code");a.addClass("active").siblings().removeClass("active"),t.element.trigger(e.Event("district:change"),[[C.area.getProvinceByAreaCode(r),C.area.getCityByAreaCode(r),C.area.getAreaByCode(r)]]),t.hide(),i.preventDefault()})},_renderProvince:function(e,t){for(var i,a="",r=0;i=e[r++];)a+='<li class="nowrap'+(t&&t==i.code?" active":"")+'" code="'+i.code+'">'+i.display+"</li>";this.province.html(a)},_renderCity:function(e,t){for(var i,a="",r=0;i=e[r++];)a+='<li class="nowrap'+(t&&t==i.code?" active":"")+'" code="'+i.code+'">'+i.name+"</li>";this.city.html(a)},_renderCounty:function(e,t){for(var i,a="",r=0;i=e[r++];)a+='<li class="nowrap'+(t&&t==i.code?" active":"")+'" code="'+i.code+'">'+i.name+"</li>";this.county.html(a)},show:function(){var t=this,i=this.options;if(i.value){var a=this.province.children(".active").index();a>=0&&this.province.parent().scrollTop(a*i.itemHeight),a=this.city.children(".active").index(),a>=0&&this.city.parent().scrollTop(a*i.itemHeight),a=this.county.children(".active").index(),a>=0&&this.county.parent().scrollTop(a*i.itemHeight)}setTimeout(function(){var i=e.Event("district:show");t.element.addClass("modal-open").trigger(i)},30)},hide:function(){var t=this;t.element.removeClass("modal-open"),setTimeout(function(){var i=e.Event("district:hide");t.element.trigger(i).remove()},400)}},e.fn.district=e.district=function(r){return e.adaptObject(this,i,r,a,t,"district")}}(window.Zepto);