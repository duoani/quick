!function(o){function n(){var o="BackCompat"==document.compatMode?document.body:document.documentElement;return Math.max(o.clientHeight,o.scrollHeight)}function e(n,e){this.element=o(n),this.options=o.extend({},f,e),this.options.render&&this.render()}function a(n,e,a){!n.attr("src")&&e&&n.addClass(a.placeholderClass),n.attr("src",e),n.attr(c,"done"),e&&(n[0].onerror=function(){n.removeClass(a.placeholderClass),n[0].onerror=null,o.isFunction(a.onLoaded)&&a.onLoaded.call(n,!1)},n[0].onload=function(){n.removeClass(a.placeholderClass),o.isFunction(a.onLoaded)&&a.onLoaded.call(n,!0)}),o.isFunction(a.onChange)&&a.onChange.call(n)}function t(n,e,a){if(n.addClass(a.placeholderClass),n.attr(i,"done"),e){var t=new Image;t.src=e,t.onerror=function(){n.removeClass(a.placeholderClass),n[0].onerror=null,o.isFunction(a.onLoaded)&&a.onLoaded.call(n,!1)},t.onload=function(){n.removeClass(a.placeholderClass).css("backgroundImage",'url("'+e+'")'),o.isFunction(a.onLoaded)&&a.onLoaded.call(n,!0)}}a.onChange&&a.onChange.call(n)}function l(n,e,a){n.attr(u,"done"),o.ajax({url:e,dataType:"script",cache:!0}),a.onChange&&a.onChange.call(n)}function r(o,n,e){o.attr(d,"done"),window[n]&&window[n](o)}function s(){var n=arguments[0],a=Array.prototype.slice.call(arguments,1);return this.each(function(){var t=o(this),l=t.data("ui.lazyload");l?"string"==typeof n&&l[n].apply(l,a):t.data("ui.lazyload",l=new e(t[0],n))})}var c="data-lazy-img",i="data-lazy-bg",d="data-lazy-fn",u="data-lazy-js",f={type:"img",source:"data-lazy-img",feature:["img","bg"],delay:100,offset:100,onChange:null,onLoaded:null,placeholderClass:"lazy-load",errorClass:"err-poster",scrollTarget:window,render:!0};e.prototype={render:function(){var e=this,a=this.options,t={};o.each(a.feature,function(o,n){t[n]=1});var l=function(){var l=o(e.options.scrollTarget).scrollTop(),r=l+n()+a.offset;t.img&&e.check(o("img["+c+"]",e.element).not("img["+c+"=done]"),c,l,r),t.bg&&e.check(o("["+i+"]",e.element).not("["+i+"=done]"),i,l,r),t.fn&&e.check(o("["+d+"]",e.element).not("["+d+"=done]"),d,l,r),t.js&&e.check(o("["+u+"]",e.element).not("["+u+"=done]"),u,l,r)},r=setTimeout(l,100),s=function(){r&&clearTimeout(r),r=setTimeout(l,a.delay)};o(this.options.scrollTarget).on("scroll",s),o(window).bind("resize",s)},load:function(){o(this.options.scrollTarget).trigger("scroll")},check:function(n,e,s,f){var h=this,g=h.options;o.each(n,function(){var n=o(this),p=n.attr(e);if(null!==p){var m=h.getTop(n[0]);m>0&&m>s-n.height()&&f>m&&("done"==p||(c==e?a(n,p,g):i==e?t(n,p,g):u==e?l(n,p,g):d==e&&r(n,p,g)))}})},getTop:function(o){var n=o.offsetTop;if(null!=o.parentNode)for(var e=o.offsetParent;null!=e;)n+=e.offsetTop,e=e.offsetParent;return n}};var h=o.fn.lazyload;o.fn.lazyload=s,o.fn.lazyload.Constructor=e,o.fn.lazyload.noConflict=function(){return o.fn.lazyload=h,this}}(Zepto);