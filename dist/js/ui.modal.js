!function(t){function o(o,e){this.options=e,this.element=t(o),this._bind(),this.options.show&&this.show()}function e(t){return t.preventDefault&&t.preventDefault(),t.returnValue=!1,t.stopPropagation&&t.stopPropagation(),!1}function n(t){for(var o=[],e=0,n=t.length;n>e;e++)"[object String]"===a.call(t[e])?o[e]={text:t[e]}:o[e]=t[e];return o}var l={title:"",subtitle:"",content:"",buttons:[{text:"确定"}],allowScroll:!1,show:!0,html:!1,backdrop:!0,backdropClose:!1,layout:"normal",customClass:"",animate:""},i={buttons:[{text:"确定"},{text:"取消"}],backdropClose:!0,layout:"actionsheet"},a=Object.prototype.toString,s='<% if(layout == "normal"){ %><div class="modal modal-default<% if(customClass){%> <%= customClass %><% } %>">    <% if(backdrop){ %>    <div class="modal-backdrop"></div>    <% } %>    <div class="modal-dialog">        <% if(title){ %>        <div class="modal-header"><%= title %></div>        <% } %>        <div class="modal-body">            <% if(html === false){ %>               <div class="modal-content">               <% if(subtitle !== ""){ %>               <h4><%= subtitle %></h4>               <% } %>               <p><%= content %></p>               </div>            <% }else if(type === "html"){ %>               <%= content %>            <% } %>        </div>        <div class="modal-footer">            <% for(var i=0, len=buttons.length; i<len; i++){ %>            <button <% if(buttons[i].type){ %>class="modal-btn-<%= buttons[i].type %>"<% } %> type="button" data-role="button"><%= buttons[i].text %></button>            <% } %>        </div>    </div></div><% } else if(layout == "actionsheet") { %><div class="actionsheet-modal<% if(customClass){%> <%= customClass %><% } %>">   <% if(backdrop){ %>   <div class="modal-backdrop"></div>   <% } %>   <div class="actionsheet-dialog">       <div class="actionsheet-menu">           <% if(content){ %>           <div class="actionsheet-desc"><%= content %></div>           <% } %>           <% for(var i=0, len=buttons.length-1; i<len; i++){ %>           <div class="actionsheet-cell <% if(buttons[i].type){ %><%= "cell-"+buttons[i].type %><% } %>" data-role="button"><%= buttons[i].text %></div>           <% } %>       </div>       <div class="actionsheet-cancel">           <% if(buttons.length){ %><div class="actionsheet-cell" data-role="button"><%= buttons[buttons.length-1].text %></div><% } %>       </div>   </div></div><% } else if(layout == "blank"){ %><div class="modal<% if(animate){%> modal-<%= animate%><% } %><% if(customClass){%> <%= customClass %><% } %>">   <% if(backdrop){ %>   <div class="modal-backdrop"></div>   <% } %>   <%= html %>   </div></div><% } else if(layout == "custom"){ %>   <%= html %><% } %>';o.prototype={_bind:function(){var o=this,e=o.element.find('[data-role="button"]');o.options.backdrop&&o.options.backdropClose&&o.element.children(".modal-backdrop").on("tap",function(t){o.hide(),t.preventDefault()}),e.on("tap",function(n){var l=e.index(this),i=t.Event("modal:action");i.index=l,o.element.trigger(i),o.hide(),n.preventDefault()})},show:function(){var o=this;!o.options.allowScroll&&t(document).on("touchmove",e),setTimeout(function(){var e=t.Event("modal:show");o.element.addClass("modal-open"),o.element.trigger(e)},30)},hide:function(){var o=this;!o.options.allowScroll&&t(document).off("touchmove",e),o.element.removeClass("modal-open"),setTimeout(function(){var e=t.Event("modal:hide");o.element.trigger(e).remove()},400)}},t.fn.modal=t.modal=function(e){return e&&e.buttons&&(e.buttons=n(e.buttons)),t.adaptObject(this,l,e,s,o,"modal")},t.alert=function(o){var e=null===o||void 0===o?null:Array.prototype.toString.call(o);return"[object String]"===e?t.modal({subtitle:o}):t.modal(o)},t.confirm=function(o){var e=null===o||void 0===o?null:Array.prototype.toString.call(o);return o="[object String]"===e?{content:o}:o,t.modal(t.extend({},i,o))}}(Zepto);