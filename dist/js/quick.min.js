!function(t){t.tpl=function(t,e){var i="var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+t.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');",o=new Function("obj",i);return e?o(e):o},t.adaptObject=function(e,i,o,n,a,s){var r=e;if("string"!=typeof o){var l=t.extend({},i,"object"==typeof o&&o);t.isArray(r)&&r.length&&"script"===t(r)[0].nodeName.toLowerCase()?r=t(t.tpl(r[0].innerHTML,l)).appendTo("body"):t.isArray(r)&&r.length&&""===r.selector?r=t(t.tpl(r[0].outerHTML,l)).appendTo("body"):t.isArray(r)||(r=t(t.tpl(n,l)).appendTo("body"))}return r.each(function(){var e=t(this),n=e.data("dui."+s);n||e.data("dui."+s,n=new a(this,t.extend({},i,"object"==typeof o&&o))),"string"==typeof o&&n[o]()})}}(Zepto),!function(t){function e(e,i){this.options=i,this.element=t(e),this._bind(),this.options.show&&this.show()}function i(t){return t.preventDefault&&t.preventDefault(),t.returnValue=!1,t.stopPropagation&&t.stopPropagation(),!1}function o(t){for(var e=[],i=0,o=t.length;o>i;i++)"[object String]"===s.call(t[i])?e[i]={text:t[i]}:e[i]=t[i];return e}var n={title:"",subtitle:"",content:"",buttons:[{text:"确定"}],allowScroll:!1,show:!0,html:!1,backdrop:!0,backdropClose:!1,layout:"normal",customClass:"",animate:""},a={buttons:[{text:"确定"},{text:"取消"}],backdropClose:!0,layout:"actionsheet"},s=Object.prototype.toString,r='<% if(layout == "normal"){ %><div class="modal modal-default<% if(customClass){%> <%= customClass %><% } %>">    <% if(backdrop){ %>    <div class="modal-backdrop"></div>    <% } %>    <div class="modal-dialog">        <% if(title){ %>        <div class="modal-header"><%= title %></div>        <% } %>        <div class="modal-body">            <% if(html === false){ %>               <div class="modal-content">               <% if(subtitle !== ""){ %>               <h4><%= subtitle %></h4>               <% } %>               <p><%= content %></p>               </div>            <% }else if(type === "html"){ %>               <%= content %>            <% } %>        </div>        <div class="modal-footer">            <% for(var i=0, len=buttons.length; i<len; i++){ %>            <button <% if(buttons[i].type){ %>class="modal-btn-<%= buttons[i].type %>"<% } %> type="button" data-role="button"><%= buttons[i].text %></button>            <% } %>        </div>    </div></div><% } else if(layout == "actionsheet") { %><div class="actionsheet-modal<% if(customClass){%> <%= customClass %><% } %>">   <% if(backdrop){ %>   <div class="modal-backdrop"></div>   <% } %>   <div class="actionsheet-dialog">       <div class="actionsheet-menu">           <% if(content){ %>           <div class="actionsheet-desc"><%= content %></div>           <% } %>           <% for(var i=0, len=buttons.length-1; i<len; i++){ %>           <div class="actionsheet-cell <% if(buttons[i].type){ %><%= "cell-"+buttons[i].type %><% } %>" data-role="button"><%= buttons[i].text %></div>           <% } %>       </div>       <div class="actionsheet-cancel">           <% if(buttons.length){ %><div class="actionsheet-cell" data-role="button"><%= buttons[buttons.length-1].text %></div><% } %>       </div>   </div></div><% } else if(layout == "blank"){ %><div class="modal<% if(animate){%> modal-<%= animate%><% } %><% if(customClass){%> <%= customClass %><% } %>">   <% if(backdrop){ %>   <div class="modal-backdrop"></div>   <% } %>   <%= html %>   </div></div><% } else if(layout == "custom"){ %>   <%= html %><% } %>';e.prototype={_bind:function(){var e=this,i=e.element.find('[data-role="button"]');e.options.backdrop&&e.options.backdropClose&&e.element.children(".modal-backdrop").on("tap",function(t){e.hide(),t.preventDefault()}),i.on("tap",function(o){var n=i.index(this),a=t.Event("modal:action");a.index=n,e.element.trigger(a),e.hide(),o.preventDefault()})},show:function(){var e=this;!e.options.allowScroll&&t(document).on("touchmove",i),setTimeout(function(){var i=t.Event("modal:show");e.element.addClass("modal-open"),e.element.trigger(i)},30)},hide:function(){var e=this;!e.options.allowScroll&&t(document).off("touchmove",i),e.element.removeClass("modal-open"),setTimeout(function(){var i=t.Event("modal:hide");e.element.trigger(i).remove()},400)}},t.fn.modal=t.modal=function(i){return i&&i.buttons&&(i.buttons=o(i.buttons)),t.adaptObject(this,n,i,r,e,"modal")},t.alert=function(e){var i=null===e||void 0===e?null:Array.prototype.toString.call(e);return"[object String]"===i?t.modal({subtitle:e}):t.modal(e)},t.confirm=function(e){var i=null===e||void 0===e?null:Array.prototype.toString.call(e);return e="[object String]"===i?{content:e}:e,t.modal(t.extend({},a,e))}}(Zepto),!function(t){function e(e,i){this.options=i,this.element=t(e),this.options.show&&this.show()}var i={show:!0,type:"modeless"},o='<% if(type === "modal"){ %><div class="loading loading-modal">    <div class="loading-modal-dialog">        <i></i>    </div></div><% }else{ %><div class="loading loading-modeless loading-open">    <i></i></div><% } %>',n={};e.prototype={show:function(){this.element.addClass("loading-open"),this.options.show=!0},hide:function(){this.element.removeClass("loading-open"),this.options.show=!1}},t.fn.loading=t.loading=function(n){return t.adaptObject(this,i,n,o,e,"loading")};var a=0;t.loadingShow=function(){a++,n.modeless||(n.modeless=t.adaptObject(this,i,{},o,e,"loading")),n.modeless.loading("show")},t.loadingHide=function(){a--,n.modeless&&!a&&n.modeless.loading("hide")}}(Zepto),!function(t){function e(e){return t.adaptObject(this,o,e,i,n,"toast")}var i='<div class="toast toast-<%=type%>"><div class="toast-content"><% if(type === "warning"){ %><i class="icon icon-emo-unhappy mr-md"></i><% }else if(type === "success"){ %><i class="icon icon-emo-happy mr-md"></i><% }else{ %><% } %><%=content%></div></div>',o={content:"",duration:3e3,type:"info"},n=function(e,i){this.element=t(e),this.elementHeight=t(e).height(),this.options=t.extend({},o,i),this.effector=i.effect&&"fade-out-up"==i.effect?s:a,this.effector.init(this),this.show()};n.prototype={show:function(){this.effector.start(this)},hide:function(){this.effector.end(this)},getOptions:function(){return this.options},getElement:function(){return this.element},onShow:function(){this.element.trigger(t.Event("toast:show"))},onHide:function(){this.element.trigger(t.Event("toast:hide"))}};var a=function(){};a.init=function(t){t.getElement().css({"-webkit-transform":"translateY(-"+t.elementHeight+"px)"})},a.start=function(t){var e=t.getOptions(),i=t.getElement();setTimeout(function(){i.css({"-webkit-transition":"all .5s"}),t.onShow(),i.css({"-webkit-transform":"translateY(0px)"}),e.duration>0&&setTimeout(function(){t.hide()},e.duration)},20)},a.end=function(t){var e=(t.getOptions(),t.getElement());t.onHide(),e.css({"-webkit-transform":"translateY(-"+t.elementHeight+"px)"}),setTimeout(function(){e.remove()},500)};var s=function(){};s.init=function(t){t.getElement().addClass("toast-fade-out-up").css({top:(document.documentElement.clientHeight-t.elementHeight)/4*3})},s.start=function(t){var e=t.getOptions(),i=t.getElement();setTimeout(function(){i.css({"-webkit-animation-duration":e.duration+"ms","animation-duration":e.duration+"ms"}),t.onShow(),i.addClass("fadeInOutUp"),setTimeout(function(){t.hide()},e.duration)},20)},s.end=function(t){var e=(t.getOptions(),t.getElement());t.onHide(),setTimeout(function(){e.remove()},20)},t.toast=function(t){var i=null===t||void 0===t?null:Array.prototype.toString.call(t);return e("[object String]"===i?{content:t}:t)},t.toastSuccess=function(t){var i=null===t||void 0===t?null:Array.prototype.toString.call(t);return"[object String]"===i&&(t={content:t}),t.type="success",e(t)},t.toastWarning=function(t){var i=null===t||void 0===t?null:Array.prototype.toString.call(t);return"[object String]"===i&&(t={content:t}),t.type="warning",e(t)}}(window.Zepto),!function(t){function e(e,i){if(this.options=i,this.element=t(e),this.province=this.element.find(".province"),this.city=this.element.find(".city"),this.county=this.element.find(".county"),i.value){var o=C.area.getProvinceByAreaCode(i.value),n=C.area.getCityByAreaCode(i.value),a=C.area.getAreaByCode(i.value);this._renderProvince(C.area.getProvinceList(),o.code),this._renderCity(C.area.getCityList(o.code),n.code),this._renderCounty(C.area.getAreaList(n.code),a.code)}else this._renderProvince(C.area.getProvinceList());this._bind(),this.options.show&&this.show()}var i={value:"",show:!0,itemHeight:40},o='<div class="area-modal">   <div class="area-backdrop">点击此处取消选择</div>   <div class="area-dialog">      <div class="area-list area-province border-r">           <div class="area-title border-b">省份</div>           <div class="area-content">               <ul class="province">               </ul>           </div>       </div>       <div class="area-list area-city border-r">           <div class="area-title border-b">城市</div>           <div class="area-content">               <ul class="city">               </ul>           </div>       </div>       <div class="area-list area-county">           <div class="area-title border-b">区/县</div>           <div class="area-content">               <ul class="county">               </ul>           </div>       </div>   </div></div>';e.prototype={_bind:function(){var e=this;this.element.children(".area-backdrop").on("touchend",function(t){e.hide(),t.preventDefault()}),this.province.on("tap","li",function(i){var o=t(this),n=o.attr("code");o.addClass("active").siblings().removeClass("active"),e._renderCity(C.area.getCityList(n)||[]),e._renderCounty([]),i.preventDefault()}),this.city.on("tap","li",function(i){var o=t(this),n=o.attr("code");o.addClass("active").siblings().removeClass("active"),e._renderCounty(C.area.getAreaList(n)||[]),i.preventDefault()}),this.county.on("tap","li",function(i){var o=t(this),n=o.attr("code");o.addClass("active").siblings().removeClass("active"),e.element.trigger(t.Event("district:change"),[[C.area.getProvinceByAreaCode(n),C.area.getCityByAreaCode(n),C.area.getAreaByCode(n)]]),e.hide(),i.preventDefault()})},_renderProvince:function(t,e){for(var i,o="",n=0;i=t[n++];)o+='<li class="nowrap'+(e&&e==i.code?" active":"")+'" code="'+i.code+'">'+i.display+"</li>";this.province.html(o)},_renderCity:function(t,e){for(var i,o="",n=0;i=t[n++];)o+='<li class="nowrap'+(e&&e==i.code?" active":"")+'" code="'+i.code+'">'+i.name+"</li>";this.city.html(o)},_renderCounty:function(t,e){for(var i,o="",n=0;i=t[n++];)o+='<li class="nowrap'+(e&&e==i.code?" active":"")+'" code="'+i.code+'">'+i.name+"</li>";this.county.html(o)},show:function(){var e=this,i=this.options;if(i.value){var o=this.province.children(".active").index();o>=0&&this.province.parent().scrollTop(o*i.itemHeight),o=this.city.children(".active").index(),o>=0&&this.city.parent().scrollTop(o*i.itemHeight),o=this.county.children(".active").index(),o>=0&&this.county.parent().scrollTop(o*i.itemHeight)}setTimeout(function(){var i=t.Event("district:show");e.element.addClass("modal-open").trigger(i)},30)},hide:function(){var e=this;e.element.removeClass("modal-open"),setTimeout(function(){var i=t.Event("district:hide");e.element.trigger(i).remove()},400)}},t.fn.district=t.district=function(n){return t.adaptObject(this,i,n,o,e,"district")}}(window.Zepto),$(function(){document.body.addEventListener("touchstart",function(){})});
+function(t){"use strict";function i(t){return t.closest(".ctrl-num")}function e(i,e){if(e=e||{},this.$element=t(i),void 0===e.min){var a=this.$element.attr("data-min");a&&!isNaN(a)&&(e.min=parseInt(a,10))}if(void 0===e.max){var o=this.$element.attr("data-max");o&&!isNaN(o)&&(e.max=parseInt(o,10))}if(void 0===e.reviseDefault){var r=this.$element.attr("data-revise-default");e.reviseDefault=""===r||"true"===r}this.options=t.extend({},l,e),this.$input=this.$element.find("input"),this.$btnDec=this.$element.find(s),this.$btnInc=this.$element.find(n),this.init()}var n='[data-num="increase"]',s='[data-num="decrease"]',a='[data-num="input"]',l={min:1,max:100,disabled:!1,readonly:!1,reviseDefault:!0},o=Object.prototype.toString;e.prototype={init:function(){var t=parseInt(this.$input.val(),10)||0;this.options.reviseDefault&&(t=this.fix(t)),this.$input.val(t),this.cache(t),this.bind(),(this.options.disabled||this.$element.hasClass("disabled"))&&this.disable(),(this.options.readonly||this.$element.hasClass("readonly"))&&this.readOnly(),this.checkDisable()},setOptions:function(t,i){var e=o.call(t);if("[object Object]"===e)for(var n in t)this.options[n]=t[n];else"[object String]"===e&&(this.options[t]=i)},cache:function(t){this.value=t},fix:function(t){return t=t>=this.options.min?t:this.options.min,t<=this.options.max?t:this.options.max},bind:function(){},increase:function(){var t=this;if(!(t.options.disabled||t.options.readonly||t.$element.hasClass("inc-disabled"))){var i=parseInt(t.$input.val(),10)||0,e=t.value;i=t.fix(i+1),t.$input.val(i),t.cache(i),i!==e&&t.trigger()}},decrease:function(){var t=this;if(!(t.options.disabled||t.options.readonly||t.$element.hasClass("dec-disabled"))){var i=parseInt(t.$input.val(),10)||0,e=t.value;i=t.fix(i-1),t.$input.val(i),t.cache(i),i!==e&&t.trigger()}},input:function(t){var i=this;if(i.options.disabled||i.options.readonly)return!1;var e=parseInt(i.$input.val(),10)||0,n=i.value;e=i.fix(e),i.$input.val(e),i.cache(e),e!==n&&t!==!1&&i.trigger()},disable:function(){this.$element.addClass("disabled"),this.$input.prop("disabled",!0),this.options.disabled=!0},enable:function(){this.$element.removeClass("disabled"),this.$input.prop("disabled",!1),this.options.disabled=!1},readOnly:function(){this.$element.addClass("readonly"),this.$input.prop("readonly",!0),this.options.readonly=!0},enaOnly:function(){this.$element.addClass("readonly"),this.$input.prop("readonly",!1),this.options.readonly=!1},checkDisable:function(){this.value<=this.options.min?this.$element.addClass("dec-disabled"):this.$element.removeClass("dec-disabled"),this.value>=this.options.max?this.$element.addClass("inc-disabled"):this.$element.removeClass("inc-disabled")},trigger:function(){this.checkDisable(),this.$element.trigger(t.Event("ctrlnum:change"),this.value)}},t.fn.ctrlnum=function(i){var n,s=Array.prototype.slice.call(arguments,1);return this.each(function(){var a=t(this),l=a.data("ui.ctrlnum");l||(l=new e(this,i),a.data("ui.ctrlnum",l)),"string"==typeof i&&(n=l[i]&&0!==i.indexOf("_")&&l[i].apply(l,s))}),void 0!==n?n:this},t(".ctrl-num").ctrlnum(),t(document).on("touchstart.ui.ctrlnum.data-api",n,function(){i(t(this)).ctrlnum("increase")}).on("touchstart.ui.ctrlnum.data-api",s,function(){i(t(this)).ctrlnum("decrease")}).on("blur.ui.ctrlnum.data-api",a,function(){i(t(this)).ctrlnum("input")})}(window.Zepto);
!function(t){function i(i,e){this.wrapper="string"==typeof i?t(i)[0]:i,this.options={startX:0,startY:0,scrollY:!0,scrollX:!1,directionLockThreshold:5,momentum:!0,duration:300,bounce:!0,bounceTime:600,bounceEasing:"",preventDefault:!0,eventPassthrough:!0,freeScroll:!1,bindToWrapper:!0,resizePolling:60,disableMouse:!1,disableTouch:!1,disablePointer:!1,tap:!0,click:!1,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:!0,useTransition:!0,useTransform:!0};for(var o in e)this.options[o]=e[o];if(this.options.role||this.options.scrollX!==!1||(this.options.eventPassthrough="horizontal"),"slider"===this.options.role){if(this.options.scrollX=!0,this.options.scrollY=!1,this.options.momentum=!1,this.scroller=t(".ui-slider-content",this.wrapper)[0],t(this.scroller.children[0]).addClass("current"),this.currentPage=0,this.count=this.scroller.children.length,this.scroller.style.width=this.count+"00%",this.itemWidth=this.scroller.children[0].clientWidth,this.scrollWidth=this.itemWidth*this.count,this.count<=1&&(this.options.indicator=!1),this.options.indicator){for(var n='<ul class="ui-slider-indicators">',o=1;o<=this.count;o++)n+=1===o?'<li class="current">'+o+"</li>":"<li>"+o+"</li>";n+="</ul>",t(this.wrapper).append(n),this.indicator=t(".ui-slider-indicators",this.wrapper)[0]}}else"tab"===this.options.role?(this.options.scrollX=!0,this.options.scrollY=!1,this.options.momentum=!1,this.scroller=t(".ui-tab-content",this.wrapper)[0],this.nav=t(".ui-tab-nav",this.wrapper)[0],t(this.scroller.children[0]).addClass("current"),t(this.nav.children[0]).addClass("current"),this.currentPage=0,this.count=this.scroller.children.length,this.scroller.style.width=this.count+"00%",this.itemWidth=this.scroller.children[0].clientWidth,this.scrollWidth=this.itemWidth*this.count):this.scroller=this.wrapper.children[0];if(this.scrollerStyle=this.scroller.style,this.translateZ=s.hasPerspective&&this.options.HWCompositing?" translateZ(0)":"",this.options.useTransition=s.hasTransition&&this.options.useTransition,this.options.useTransform=s.hasTransform&&this.options.useTransform,this.options.eventPassthrough=this.options.eventPassthrough===!0?"vertical":this.options.eventPassthrough,this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault,this.options.scrollX="horizontal"==this.options.eventPassthrough?!1:this.options.scrollX,this.options.scrollY="vertical"==this.options.eventPassthrough?!1:this.options.scrollY,this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough,this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold,this.options.bounceEasing="string"==typeof this.options.bounceEasing?s.ease[this.options.bounceEasing]||s.ease.circular:this.options.bounceEasing,this.options.resizePolling=void 0===this.options.resizePolling?60:this.options.resizePolling,this.options.tap===!0&&(this.options.tap="tap"),this.options.useTransform===!1&&(this.scroller.style.position="relative"),this.x=0,this.y=0,this.directionX=0,this.directionY=0,this._events={},this._init(),this.refresh(),this.scrollTo(this.options.startX,this.options.startY),this.enable(),this.options.autoplay){var r=this;this.options.interval=this.options.interval||2e3,this.options.flag=setTimeout(function(){r._autoplay.apply(r)},r.options.interval)}}var e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},s=function(){function t(t){return s===!1?!1:""===s?t:s+t.charAt(0).toUpperCase()+t.substr(1)}var i={},e=document.createElement("div").style,s=function(){for(var t,i=["t","webkitT","MozT","msT","OT"],s=0,o=i.length;o>s;s++)if(t=i[s]+"ransform",t in e)return i[s].substr(0,i[s].length-1);return!1}();i.getTime=Date.now||function(){return(new Date).getTime()},i.extend=function(t,i){for(var e in i)t[e]=i[e]},i.addEvent=function(t,i,e,s){t.addEventListener(i,e,!!s)},i.removeEvent=function(t,i,e,s){t.removeEventListener(i,e,!!s)},i.prefixPointerEvent=function(t){return window.MSPointerEvent?"MSPointer"+t.charAt(9).toUpperCase()+t.substr(10):t},i.momentum=function(t,i,e,s,o,n){var r,h,a=t-i,l=Math.abs(a)/e;return n=void 0===n?6e-4:n,r=t+l*l/(2*n)*(0>a?-1:1),h=l/n,s>r?(r=o?s-o/2.5*(l/8):s,a=Math.abs(r-t),h=a/l):r>0&&(r=o?o/2.5*(l/8):0,a=Math.abs(t)+r,h=a/l),{destination:Math.round(r),duration:h}};var o=t("transform");return i.extend(i,{hasTransform:o!==!1,hasPerspective:t("perspective")in e,hasTouch:"ontouchstart"in window,hasPointer:window.PointerEvent||window.MSPointerEvent,hasTransition:t("transition")in e}),i.isBadAndroid=/Android /.test(window.navigator.appVersion)&&!/Chrome\/\d/.test(window.navigator.appVersion),i.extend(i.style={},{transform:o,transitionTimingFunction:t("transitionTimingFunction"),transitionDuration:t("transitionDuration"),transitionDelay:t("transitionDelay"),transformOrigin:t("transformOrigin"),transitionProperty:t("transitionProperty")}),i.offset=function(t){for(var i=-t.offsetLeft,e=-t.offsetTop;t=t.offsetParent;)i-=t.offsetLeft,e-=t.offsetTop;return{left:i,top:e}},i.preventDefaultException=function(t,i){for(var e in i)if(i[e].test(t[e]))return!0;return!1},i.extend(i.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,pointerdown:3,pointermove:3,pointerup:3,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3}),i.extend(i.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(t){return t*(2-t)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(t){return Math.sqrt(1- --t*t)}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(t){var i=4;return(t-=1)*t*((i+1)*t+i)+1}},bounce:{style:"",fn:function(t){return(t/=1)<1/2.75?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},elastic:{style:"",fn:function(t){var i=.22,e=.4;return 0===t?0:1==t?1:e*Math.pow(2,-10*t)*Math.sin((t-i/4)*(2*Math.PI)/i)+1}}}),i.tap=function(t,i){var e=document.createEvent("Event");e.initEvent(i,!0,!0),e.pageX=t.pageX,e.pageY=t.pageY,t.target.dispatchEvent(e)},i.click=function(t){var i,e=t.target;/(SELECT|INPUT|TEXTAREA)/i.test(e.tagName)||(i=document.createEvent("MouseEvents"),i.initMouseEvent("click",!0,!0,t.view,1,e.screenX,e.screenY,e.clientX,e.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,0,null),i._constructed=!0,e.dispatchEvent(i))},i}();i.prototype={_init:function(){this._initEvents()},_initEvents:function(t){var i=t?s.removeEvent:s.addEvent,e=this.options.bindToWrapper?this.wrapper:window;i(window,"orientationchange",this),i(window,"resize",this),this.options.click&&i(this.wrapper,"click",this,!0),this.options.disableMouse||(i(this.wrapper,"mousedown",this),i(e,"mousemove",this),i(e,"mousecancel",this),i(e,"mouseup",this)),s.hasPointer&&!this.options.disablePointer&&(i(this.wrapper,s.prefixPointerEvent("pointerdown"),this),i(e,s.prefixPointerEvent("pointermove"),this),i(e,s.prefixPointerEvent("pointercancel"),this),i(e,s.prefixPointerEvent("pointerup"),this)),s.hasTouch&&!this.options.disableTouch&&(i(this.wrapper,"touchstart",this),i(e,"touchmove",this),i(e,"touchcancel",this),i(e,"touchend",this)),i(this.scroller,"transitionend",this),i(this.scroller,"webkitTransitionEnd",this),i(this.scroller,"oTransitionEnd",this),i(this.scroller,"MSTransitionEnd",this),"tab"===this.options.role&&(i(this.nav,"touchend",this),i(this.nav,"mouseup",this),i(this.nav,"pointerup",this))},refresh:function(){this.wrapper.offsetHeight;this.wrapperWidth=this.wrapper.clientWidth,this.wrapperHeight=this.wrapper.clientHeight;var t=window.getComputedStyle(this.wrapper,null),i=t["padding-top"].replace(/[^-\d.]/g,""),e=t["padding-bottom"].replace(/[^-\d.]/g,""),o=t["padding-left"].replace(/[^-\d.]/g,""),n=t["padding-right"].replace(/[^-\d.]/g,""),r=window.getComputedStyle(this.scroller,null),h=r["margin-top"].replace(/[^-\d.]/g,""),a=r["margin-bottom"].replace(/[^-\d.]/g,""),l=r["margin-left"].replace(/[^-\d.]/g,""),c=r["margin-right"].replace(/[^-\d.]/g,"");this.scrollerWidth=this.scroller.offsetWidth+parseInt(o)+parseInt(n)+parseInt(l)+parseInt(c),this.scrollerHeight=this.scroller.offsetHeight+parseInt(i)+parseInt(e)+parseInt(h)+parseInt(a),("slider"===this.options.role||"tab"===this.options.role)&&(this.itemWidth=this.scroller.children[0].clientWidth,this.scrollWidth=this.itemWidth*this.count,this.scrollerWidth=this.scrollWidth),this.maxScrollX=this.wrapperWidth-this.scrollerWidth,this.maxScrollY=this.wrapperHeight-this.scrollerHeight,this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0,this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0,this.hasHorizontalScroll||(this.maxScrollX=0,this.scrollerWidth=this.wrapperWidth),this.hasVerticalScroll||(this.maxScrollY=0,this.scrollerHeight=this.wrapperHeight),this.endTime=0,this.directionX=0,this.directionY=0,this.wrapperOffset=s.offset(this.wrapper),this.resetPosition()},handleEvent:function(t){switch(t.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(t);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(t);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(t);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(t);break;case"wheel":case"DOMMouseScroll":case"mousewheel":this._wheel(t);break;case"keydown":this._key(t);break;case"click":t._constructed||(t.preventDefault(),t.stopPropagation())}},_start:function(t){if((1==s.eventType[t.type]||0===t.button)&&this.enabled&&(!this.initiated||s.eventType[t.type]===this.initiated)){!this.options.preventDefault||s.isBadAndroid||s.preventDefaultException(t.target,this.options.preventDefaultException)||t.preventDefault();var i,e=t.touches?t.touches[0]:t;if(this.initiated=s.eventType[t.type],this.moved=!1,this.distX=0,this.distY=0,this.directionX=0,this.directionY=0,this.directionLocked=0,this._transitionTime(),this.startTime=s.getTime(),this.options.useTransition&&this.isInTransition&&"slider"!==this.options.role&&"tab"!==this.options.role?(this.isInTransition=!1,i=this.getComputedPosition(),this._translate(Math.round(i.x),Math.round(i.y))):!this.options.useTransition&&this.isAnimating&&(this.isAnimating=!1),this.startX=this.x,this.startY=this.y,this.absStartX=this.x,this.absStartY=this.y,this.pointX=e.pageX,this.pointY=e.pageY,this.options.autoplay){var o=this;clearTimeout(this.options.flag),this.options.flag=setTimeout(function(){o._autoplay.apply(o)},o.options.interval)}event.stopPropagation()}},_move:function(i){if(this.enabled&&s.eventType[i.type]===this.initiated){this.options.preventDefault&&i.preventDefault();var e,o,n,r,h=i.touches?i.touches[0]:i,a=h.pageX-this.pointX,l=h.pageY-this.pointY,c=s.getTime();if(this.pointX=h.pageX,this.pointY=h.pageY,this.distX+=a,this.distY+=l,n=Math.abs(this.distX),r=Math.abs(this.distY),!(c-this.endTime>300&&10>n&&10>r)){if(this.directionLocked||this.options.freeScroll||(n>r+this.options.directionLockThreshold?this.directionLocked="h":r>=n+this.options.directionLockThreshold?this.directionLocked="v":this.directionLocked="n"),"h"==this.directionLocked){if("tab"===this.options.role&&t(this.scroller).children("li").height("auto"),"vertical"==this.options.eventPassthrough)i.preventDefault();else if("horizontal"==this.options.eventPassthrough)return void(this.initiated=!1);l=0}else if("v"==this.directionLocked){if("horizontal"==this.options.eventPassthrough)i.preventDefault();else if("vertical"==this.options.eventPassthrough)return void(this.initiated=!1);a=0}a=this.hasHorizontalScroll?a:0,l=this.hasVerticalScroll?l:0,e=this.x+a,o=this.y+l,(e>0||e<this.maxScrollX)&&(e=this.options.bounce?this.x+a/3:e>0?0:this.maxScrollX),(o>0||o<this.maxScrollY)&&(o=this.options.bounce?this.y+l/3:o>0?0:this.maxScrollY),this.directionX=a>0?-1:0>a?1:0,this.directionY=l>0?-1:0>l?1:0,this.moved=!0,this._translate(e,o),c-this.startTime>300&&(this.startTime=c,this.startX=this.x,this.startY=this.y)}}},_end:function(i){if(this.enabled&&s.eventType[i.type]===this.initiated){this.options.preventDefault&&!s.preventDefaultException(i.target,this.options.preventDefaultException)&&i.preventDefault();var e,o,n=(i.changedTouches?i.changedTouches[0]:i,s.getTime()-this.startTime),r=Math.round(this.x),h=Math.round(this.y),a=Math.abs(r-this.startX),l=(Math.abs(h-this.startY),0),c="";if(this.isInTransition=0,this.initiated=0,this.endTime=s.getTime(),this.resetPosition(this.options.bounceTime))return void("tab"===this.options.role&&t(this.scroller.children[this.currentPage]).siblings("li").height(0));if(this.scrollTo(r,h),this.moved||(this.options.tap&&1===s.eventType[i.type]&&s.tap(i,this.options.tap),this.options.click&&s.click(i)),this.options.momentum&&300>n&&(e=this.hasHorizontalScroll?s.momentum(this.x,this.startX,n,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:r,duration:0},o=this.hasVerticalScroll?s.momentum(this.y,this.startY,n,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:h,duration:0},r=e.destination,h=o.destination,l=Math.max(e.duration,o.duration),this.isInTransition=1),r!=this.x||h!=this.y)return(r>0||r<this.maxScrollX||h>0||h<this.maxScrollY)&&(c=s.ease.quadratic),void this.scrollTo(r,h,l,c);if("tab"===this.options.role&&t(event.target).closest("ul").hasClass("ui-tab-nav")){t(this.nav).children().removeClass("current"),t(event.target).addClass("current");var p=this.currentPage;this.currentPage=t(event.target).index(),t(this.scroller).children().height("auto"),this._execEvent("beforeScrollStart",p,this.currentPage)}("slider"===this.options.role||"tab"===this.options.role)&&(30>a?this.scrollTo(-this.itemWidth*this.currentPage,0,this.options.bounceTime,this.options.bounceEasing):r-this.startX<0?(this._execEvent("beforeScrollStart",this.currentPage,this.currentPage+1),this.scrollTo(-this.itemWidth*++this.currentPage,0,this.options.bounceTime,this.options.bounceEasing)):r-this.startX>=0&&(this._execEvent("beforeScrollStart",this.currentPage,this.currentPage-1),this.scrollTo(-this.itemWidth*--this.currentPage,0,this.options.bounceTime,this.options.bounceEasing)),"tab"===this.options.role&&t(this.scroller.children[this.currentPage]).siblings("li").height(0),this.indicator&&a>=30?(t(this.indicator).children().removeClass("current"),t(this.indicator.children[this.currentPage]).addClass("current")):this.nav&&a>=30&&(t(this.nav).children().removeClass("current"),t(this.nav.children[this.currentPage]).addClass("current")),t(this.scroller).children().removeClass("current"),t(this.scroller.children[this.currentPage]).addClass("current"))}},_resize:function(){var t=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){t.refresh()},this.options.resizePolling)},_transitionEnd:function(t){t.target==this.scroller&&this.isInTransition&&(this._transitionTime(),this.resetPosition(this.options.bounceTime)||(this.isInTransition=!1,this._execEvent("scrollEnd",this.currentPage)))},destroy:function(){this._initEvents(!0)},resetPosition:function(t){var i=this.x,e=this.y;return t=t||0,!this.hasHorizontalScroll||this.x>0?i=0:this.x<this.maxScrollX&&(i=this.maxScrollX),!this.hasVerticalScroll||this.y>0?e=0:this.y<this.maxScrollY&&(e=this.maxScrollY),i==this.x&&e==this.y?!1:(this.scrollTo(i,e,t,this.options.bounceEasing),!0)},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},on:function(t,i){this._events[t]||(this._events[t]=[]),this._events[t].push(i)},off:function(t,i){if(this._events[t]){var e=this._events[t].indexOf(i);e>-1&&this._events[t].splice(e,1)}},_execEvent:function(t){if(this._events[t]){var i=0,e=this._events[t].length;if(e)for(;e>i;i++)this._events[t][i].apply(this,[].slice.call(arguments,1))}},scrollTo:function(t,i,e,o){o=o||s.ease.circular,this.isInTransition=this.options.useTransition&&e>0,!e||this.options.useTransition&&o.style?("slider"!==this.options.role&&"tab"!==this.options.role||0===e||(e=this.options.duration,this.scrollerStyle[s.style.transitionProperty]=s.style.transform),this.scrollerStyle[s.style.transitionTimingFunction]=o.style,this._transitionTime(e),this._translate(t,i)):this._animate(t,i,e,o.fn)},scrollToElement:function(t,i,e,o,n){if(t=t.nodeType?t:this.scroller.querySelector(t)){var r=s.offset(t);r.left-=this.wrapperOffset.left,r.top-=this.wrapperOffset.top,e===!0&&(e=Math.round(t.offsetWidth/2-this.wrapper.offsetWidth/2)),o===!0&&(o=Math.round(t.offsetHeight/2-this.wrapper.offsetHeight/2)),r.left-=e||0,r.top-=o||0,r.left=r.left>0?0:r.left<this.maxScrollX?this.maxScrollX:r.left,r.top=r.top>0?0:r.top<this.maxScrollY?this.maxScrollY:r.top,i=void 0===i||null===i||"auto"===i?Math.max(Math.abs(this.x-r.left),Math.abs(this.y-r.top)):i,this.scrollTo(r.left,r.top,i,n)}},_transitionTime:function(t){t=t||0,this.scrollerStyle[s.style.transitionDuration]=t+"ms",!t&&s.isBadAndroid&&(this.scrollerStyle[s.style.transitionDuration]="0.001s")},_translate:function(t,i){this.options.useTransform?this.scrollerStyle[s.style.transform]="translate("+t+"px,"+i+"px)"+this.translateZ:(t=Math.round(t),i=Math.round(i),this.scrollerStyle.left=t+"px",this.scrollerStyle.top=i+"px"),this.x=t,this.y=i},getComputedPosition:function(){var t,i,e=window.getComputedStyle(this.scroller,null);return this.options.useTransform?(e=e[s.style.transform].split(")")[0].split(", "),t=+(e[12]||e[4]),i=+(e[13]||e[5])):(t=+e.left.replace(/[^-\d.]/g,""),i=+e.top.replace(/[^-\d.]/g,"")),{x:t,y:i}},_animate:function(t,i,o,n){function r(){var u,d,f,m=s.getTime();return m>=p?(h.isAnimating=!1,h._translate(t,i),void(h.resetPosition(h.options.bounceTime)||h._execEvent("scrollEnd",this.currentPage))):(m=(m-c)/o,f=n(m),u=(t-a)*f+a,d=(i-l)*f+l,h._translate(u,d),void(h.isAnimating&&e(r)))}var h=this,a=this.x,l=this.y,c=s.getTime(),p=c+o;this.isAnimating=!0,r()},_autoplay:function(){var i=this,e=i.currentPage;i.currentPage=i.currentPage>=i.count-1?0:++i.currentPage,i._execEvent("beforeScrollStart",e,i.currentPage),"tab"===this.options.role&&(t(this.scroller).children().height("auto"),document.body.scrollTop=0),i.scrollTo(-i.itemWidth*i.currentPage,0,i.options.bounceTime,i.options.bounceEasing),i.indicator?(t(i.indicator).children().removeClass("current"),t(i.indicator.children[i.currentPage]).addClass("current"),t(i.scroller).children().removeClass("current"),t(i.scroller.children[i.currentPage]).addClass("current")):i.nav&&(t(i.nav).children().removeClass("current"),t(i.nav.children[i.currentPage]).addClass("current"),t(i.scroller).children().removeClass("current"),t(i.scroller.children[i.currentPage]).addClass("current")),i.options.flag=setTimeout(function(){i._autoplay.apply(i)},i.options.interval)},moveTo:function(i){var e=this,s=e.currentPage;e.currentPage=0>i?0:i>e.count-1?e.count:i,e._execEvent("beforeScrollStart",s,e.currentPage),"tab"===this.options.role&&(t(this.scroller).children().height("auto"),document.body.scrollTop=0),e.scrollTo(-e.itemWidth*e.currentPage,0,0,e.options.bounceEasing),e.indicator?(t(e.indicator).children().removeClass("current"),t(e.indicator.children[e.currentPage]).addClass("current"),t(e.scroller).children().removeClass("current"),t(e.scroller.children[e.currentPage]).addClass("current")):e.nav&&(t(e.nav).children().removeClass("current"),t(e.nav.children[e.currentPage]).addClass("current"),t(e.scroller).children().removeClass("current"),t(e.scroller.children[e.currentPage]).addClass("current"))}},window.fz=window.fz||{},window.frozen=window.frozen||{},window.fz.Scroll=window.frozen.Scroll=i,"function"==typeof define&&define(function(t,e,s){s.exports=i})}(window.Zepto);
!function(t){"use strict";function i(i,e){this.element=t(i),this.options=t.extend({},g,e),this.options.text=this.element.find("["+r+"]").text()||"",this.options.dynamic="true"===this.element.attr(s)||""===this.element.attr(s)?!0:!1,this.options.enableRemove="true"===this.element.attr(d)||""===this.element.attr(d)?!0:!1,this.urls=[],this.imgs=[],this.options.dynamic||this.init()}function e(){var e=arguments[0],l=Array.prototype.slice.call(arguments,1);return this.each(function(){var a=t(this),n=a.attr(o),r=n?a.closest(n):a.parent(),s=r.data("ui.gallery");s||r.data("ui.gallery",s=new i(r[0])),"string"==typeof e&&s[e].apply(s,l)})}var l='[data-toggle= "gallery"]',a="data-gallery-url",n="data-gallery-lazy-src",o="data-gallery-parent",r="data-gallery-text",s="data-gallery-dynamic",d="data-gallery-enable-remove",g={direction:"horizontal",dynamic:!1},c='<div class="gallery-dialog"></div>',h='<div class="gallery-slide">   <ul class="gallery-content ui-slider-content" style="width: <%=urls.length%>00%;">       <% for(var i=0, len=urls.length; i<len; i++){ %>       <li><img class="gallery-img gallery-loading" '+n+'="<%= urls[i] %>"/></li>       <% } %>   </ul></div><% if( text ){ %><div class="gallery-text"><%= text %></div><% } %><div class="gallery-icon gallery-back"><i class="icon icon-left-open-big"></i></div><% if( remove ){ %><div class="gallery-icon gallery-remove"><i class="icon icon-trash-empty"></i></div><% } %>';i.prototype={init:function(){var i=[];this.element.find(l).each(function(){var e=t(this).attr(a);e&&i.push(e)});this.urls=i},show:function(i){var e=this;this.options.dynamic&&this.init(),e.indexing(i);var l=t.modal({layout:"blank",customClass:"modal-dark",html:c,show:!1});l.on("modal:show",function(){t(this);e.build(),e.bind(),e.load(e.index)}),l.on("modal:hide",function(){e.dialog=null}),this.dialog=l,l.modal("show")},hide:function(){},indexing:function(i){var e=0;if(i){var l=t(i).attr(a);l&&(e=t.inArray(l,this.urls))}this.index=e>=0?e:0},build:function(){this.imgs=this.dialog.find(".gallery-dialog").html(t.tpl(h,{urls:this.urls,text:this.options.text,remove:this.options.enableRemove})).find(".gallery-img")},bind:function(){var i=this;i.dialog.find(".gallery-back").on("tap",function(t){i.dialog.modal("hide"),t.stopPropagation()});var e=new fz.Scroll(i.dialog.find(".gallery-slide")[0],{role:"slider",indicator:!0,autoplay:!1,interval:3e3});if(e.moveTo(this.index),e.on("beforeScrollStart",function(t,e){i.load(e)}),i.options.enableRemove&&i.dialog.find(".gallery-remove").on("tap",function(l){t.confirm({content:"确定删除此图片?",buttons:[{text:"删除",type:"primary"},"取消"]}).on("modal:action",function(l){0===l.index&&(i.element.trigger(t.Event("gallery:remove"),e.currentPage),i.dialog.modal("hide"))}),l.stopPropagation()}),i.options.text){var l=i.dialog.find(".gallery-text");i.dialog.find(".gallery-slide").on("tap",function(){l.toggle()})}},load:function(i){var e=this,l=e.imgs.eq(i),a=l.attr(n);if(a&&"done"!=a){var o=new Image;t.loadingShow(),o.onload=function(){var i,e,r=document.documentElement.clientWidth,s=document.documentElement.clientHeight,d=o.width/r,g=o.height/s;1>=d&&1>=g?(i=o.width,e=o.height):d>g?(i="100%",e="auto"):(i="auto",e="100%"),l.css({width:i,height:e}).attr("src",a).attr(n,"done"),t.loadingHide()},o.onerror=function(){t.loadingHide()},o.src=a}}};var u=t.fn.gallery;t.fn.gallery=e,t.fn.gallery.Constructor=i,t.fn.gallery.noConflict=function(){return t.fn.gallery=u,this};var m=function(i){i.preventDefault(),e.call(t(this),"show",this)};t(document).on("tap.ui.gallery.data-api",'[data-toggle="gallery"]',m)}(Zepto);
!function(t){function n(){var t="BackCompat"==document.compatMode?document.body:document.documentElement;return Math.max(t.clientHeight,t.scrollHeight)}function i(n,i){this.element=t(n),this.options=t.extend({},o,i),this.$scrollTarget=t(this.options.scrollTarget||window),this.scrollTick=0,this.busy=!1,this.disabled=!!this.options.disabled,this.scrollHandler=this.checkScroll(),this.options.render&&this.render()}function e(){var n=arguments[0],e=Array.prototype.slice.call(arguments,1);return this.each(function(){var o=t(this),s=o.data("ui.infinite");s?"string"==typeof n&&s[n].apply(s,e):o.data("ui.infinite",s=new i(o[0],n))})}var o={offset:-200,disabled:!1,scrollTarget:window,callback:t.noop,render:!0};i.prototype={render:function(){var t=this;t.$scrollTarget.on("scroll",this.scrollHandler),setTimeout(function(){t.scrollHandler()},50)},done:function(){this.busy=!1},checkScroll:function(){var i=this;return function(){i.busy||i.disabled||(clearTimeout(i.scrollTick),i.scrollTick=setTimeout(function(){var e=i.$scrollTarget.scrollTop(),o=n(),s=i.element.offset(),l=i.element[0].offsetTop,r=s.height;if(e+o>=l+r+i.options.offset){i.busy=!0;var c=t.Deferred();c.then(function(){i.done()},function(){i.done()}),i.options.callback.call(i.element[0],c)}},50))}},enable:function(){this.disabled=!1},disable:function(){this.disabled=!0},dispose:function(){clearTimeout(this.scrollTick),this.$scrollTarget.off("scroll",this.scrollHandler)}};var s=t.fn.infinite;t.fn.infinite=e,t.fn.infinite.Constructor=i,t.fn.infinite.noConflict=function(){return t.fn.infinite=s,this}}(Zepto);
!function(t){function n(t){return t.closest(".form-control")}function a(t){t.val()?n(t).addClass("has-value"):n(t).removeClass("has-value")}var u='[data-input-type="text"]',i='[data-input-type="clear"]';t(document).on("blur.ui.input.data-api",u,function(){a(t(this))}).on("touchend.ui.input.data-api",i,function(){var a=n(t(this)).removeClass("has-value"),i=a.find(u).val("");setTimeout(function(){i.focus()},50)}),t(function(){t(u).each(function(){a(t(this))})})}(window.Zepto);
!function(o){function n(){var o="BackCompat"==document.compatMode?document.body:document.documentElement;return Math.max(o.clientHeight,o.scrollHeight)}function e(n,e){this.element=o(n),this.options=o.extend({},f,e),this.options.render&&this.render()}function a(n,e,a){!n.attr("src")&&e&&n.addClass(a.placeholderClass),n.attr("src",e),n.attr(c,"done"),e&&(n[0].onerror=function(){n.removeClass(a.placeholderClass),n[0].onerror=null,o.isFunction(a.onLoaded)&&a.onLoaded.call(n,!1)},n[0].onload=function(){n.removeClass(a.placeholderClass),o.isFunction(a.onLoaded)&&a.onLoaded.call(n,!0)}),o.isFunction(a.onChange)&&a.onChange.call(n)}function t(n,e,a){if(n.addClass(a.placeholderClass),n.attr(i,"done"),e){var t=new Image;t.src=e,t.onerror=function(){n.removeClass(a.placeholderClass),n[0].onerror=null,o.isFunction(a.onLoaded)&&a.onLoaded.call(n,!1)},t.onload=function(){n.removeClass(a.placeholderClass).css("backgroundImage",'url("'+e+'")'),o.isFunction(a.onLoaded)&&a.onLoaded.call(n,!0)}}a.onChange&&a.onChange.call(n)}function l(n,e,a){n.attr(u,"done"),o.ajax({url:e,dataType:"script",cache:!0}),a.onChange&&a.onChange.call(n)}function r(o,n,e){o.attr(d,"done"),window[n]&&window[n](o)}function s(){var n=arguments[0],a=Array.prototype.slice.call(arguments,1);return this.each(function(){var t=o(this),l=t.data("ui.lazyload");l?"string"==typeof n&&l[n].apply(l,a):t.data("ui.lazyload",l=new e(t[0],n))})}var c="data-lazy-img",i="data-lazy-bg",d="data-lazy-fn",u="data-lazy-js",f={type:"img",source:"data-lazy-img",feature:["img","bg"],delay:100,offset:100,onChange:null,onLoaded:null,placeholderClass:"lazy-load",errorClass:"err-poster",scrollTarget:window,render:!0};e.prototype={render:function(){var e=this,a=this.options,t={};o.each(a.feature,function(o,n){t[n]=1});var l=function(){var l=o(e.options.scrollTarget).scrollTop(),r=l+n()+a.offset;t.img&&e.check(o("img["+c+"]",e.element).not("img["+c+"=done]"),c,l,r),t.bg&&e.check(o("["+i+"]",e.element).not("["+i+"=done]"),i,l,r),t.fn&&e.check(o("["+d+"]",e.element).not("["+d+"=done]"),d,l,r),t.js&&e.check(o("["+u+"]",e.element).not("["+u+"=done]"),u,l,r)},r=setTimeout(l,100),s=function(){r&&clearTimeout(r),r=setTimeout(l,a.delay)};o(this.options.scrollTarget).on("scroll",s),o(window).bind("resize",s)},load:function(){o(this.options.scrollTarget).trigger("scroll")},check:function(n,e,s,f){var h=this,g=h.options;o.each(n,function(){var n=o(this),p=n.attr(e);if(null!==p){var m=h.getTop(n[0]);m>0&&m>s-n.height()&&f>m&&("done"==p||(c==e?a(n,p,g):i==e?t(n,p,g):u==e?l(n,p,g):d==e&&r(n,p,g)))}})},getTop:function(o){var n=o.offsetTop;if(null!=o.parentNode)for(var e=o.offsetParent;null!=e;)n+=e.offsetTop,e=e.offsetParent;return n}};var h=o.fn.lazyload;o.fn.lazyload=s,o.fn.lazyload.Constructor=e,o.fn.lazyload.noConflict=function(){return o.fn.lazyload=h,this}}(Zepto);
!function(t){function i(t,i){}i.prototype={},t.fn.scrollable=function(n){var o,a=Array.prototype.slice.call(arguments,1);return this.each(function(){var e=t(this),l=e.data("ui.scrollable");l||(l=new i(this,n),e.data("ui.scrollable",l)),"string"==typeof n&&(o=l[n]&&0!==n.indexOf("_")&&l[n].apply(l,a))}),void 0!==o?o:this}}(window.Zepto);
!function(){$.fn.scrollwatcher=function(n){return this.each(function(){var o=$(this),c=o.scrollTop(),r=n||function(){};o.on("scroll",function(){var n=o.scrollTop(),t=n-c;return 0===t?!1:(r(t>0?"down":"up",n),void(c=n))})})}}();
!function(t){"use strict";function a(a){this.element=t(a)}function e(){var e=arguments[0],i=Array.prototype.slice.call(arguments,1);return this.each(function(){var n=t(this),r=n.attr("data-parent")||"ul.tab",c=n.closest(r),s=c.data("ui.tab");s||c.data("ui.tab",s=new a(c[0])),"string"==typeof e&&s[e].apply(s,i)})}a.prototype={show:function(a){var e=t(a),i=t(this.element),n=e.attr("data-target");if(n||(n=e.attr("href")),!e.parent("li").hasClass("active")){var r=i.children("li.active").children("a"),c=t.Event("tab:hide",{relatedTarget:e[0]}),s=t.Event("tab:show",{relatedTarget:r[0]});r.trigger(c),e.trigger(s);var o=t(n);this.activate(e.closest("li"),i),this.activate(o,o.parent(),function(){r.trigger({type:"tab:hidden",relatedTarget:e[0]}),e.trigger({type:"tab:shown",telatedTarget:r[0]})})}},activate:function(t,a,e){function i(){n.removeClass("active"),t.addClass("active"),e&&e()}var n=a.find("> .active");i()}};var i=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=a,t.fn.tab.noConflict=function(){return t.fn.tab=i,this};var n=function(a){a.preventDefault(),e.call(t(this),"show",this)};t(document).on("click.ui.tab.data-api",'[data-toggle="tab"]',n)}(Zepto);
!function(t){"use strict";function e(){var e,i=arguments[0],n=Array.prototype.slice.call(arguments,1);return this.each(function(){var r=t(this),s=r.data("ui.textarea");s?"string"==typeof i&&(e=s[i].apply(s,n)):r.data("ui.textarea",s=new a(r[0],i))}),void 0!==e?e:this}var i={limit:!0,useSBC:!0,min:0,max:400,wrapper:!0,wrapperClass:"ui-text",errorClass:"",render:!0},n=function(t){return t.replace(/[^\x00-\xff]/g,"xx").length},a=function(e,n){this.$element=t(e),this.options=t.extend({},i,n),this.options.render&&this.render()};a.prototype={render:function(){var e=this,i=e.options;i.wrapper&&(e.$element.is("textarea")?(e.$element.wrap('<div class="'+e.options.wrapperClass+'"></div>'),i.limit&&(e.$info=t('<div class="ui-text-info text-muted"></div>').insertAfter(e.$element))):e.$element.is("input:text")),e.$element.bind({input:function(){e.check()},propertychange:function(){e.check()}}),i.limit&&e.check(!0)},check:function(e){var i=!0,a=this.options;if(a.limit){var r=t.trim(this.$element.val()),s=n(r),o="";s?s<this.options.min?(this.$info&&this.$info.addClass("text-danger"),o=a.useSBC?"请再输入"+Math.ceil((a.min-s)/2)+"个字":"请再输入"+(a.min-s)+"个字符",i=!1):s>this.options.max?(this.$info&&this.$info.addClass("text-danger"),o=a.useSBC?"已超出"+Math.ceil((s-a.max)/2)+"个字":"已超出"+(s-a.max)+"个字符",i=!1):(this.$info&&this.$info.removeClass("text-danger"),o=a.useSBC?"还可输入"+Math.ceil((a.max-s)/2)+"个字":"还可输入"+(a.max-s)+"个字符",i=!0):(!e&&this.$info&&this.$info.addClass("text-danger"),o=a.useSBC?"请输入"+parseInt(a.min/2)+"至"+parseInt(a.max/2)+"个字":"请输入"+a.min+"至"+a.max+"个字符",i=!1),this.$info&&this.$info.text(o)}if(!e&&a.errorClass){var l=a.wrapper?this.$element.parent():this.$element;i?l.addClass(a.errorClass):l.addClass(a.errorClass)}return i}};var r=t.fn.textarea;t.fn.textarea=e,t.fn.textarea.Constructor=a,t.fn.textarea.noConflict=function(){return t.fn.textarea=r,this}}(Zepto);
+function(e,t){var i=0,n={},r={STATE_STOPPED:1,STATE_STARTED:2,STATE_QUEUED:1,STATE_UPLOADING:2,STATE_FAILED:4,STATE_DONE:5,ERROR_GENERIC:-100,ERROR_HTTP:-200,ERROR_IO:-300,ERROR_SECURITY:-400,ERROR_INIT:-500,ERROR_FILE_SIZE:-600,ERROR_FILE_EXTENSION:-601,ERROR_FILE_COUNT:-602,ERROR_IMAGE_FORMAT:-700,ERROR_IMAGE_MEMORY:-701,ERROR_IMAGE_DIMENSIONS:-702,EVENT_INIT:"init",EVENT_INIT_AFTER:"init-after",EVENT_FILES_ADD:"files-add",EVENT_FILES_REMOVE:"files-remove",EVENT_FILES_UPLOAD_COMPLETE:"files-upload-complete",EVENT_FILE_UPLOAD_BEFORE:"file-upload-before",EVENT_FILE_UPLOAD_START:"file-upload-start",EVENT_FILE_UPLOAD_PROGRESS:"file-upload-progress",EVENT_FILE_UPLOAD_COMPLETE:"file-upload-complete",EVENT_FILE_UPLOAD_CANCEL:"file-upload-cancel",EVENT_FILE_UPLOAD_CHUNK:"file-chunk-uploaded",EVENT_QUEUE_CHANGE:"queue-change",EVENT_START:"start",EVENT_STOP:"stop",EVENT_REFRESH:"refresh",EVENT_BROWSE_DISABLE:"browse-disable",EVENT_DISPOSE:"dispose",EVENT_ERROR:"error",runtimes:[],guidPrefix:"p",guid:function(){for(var e=(new Date).getTime().toString(32),t=0;5>t;t++)e+=Math.floor(65535*Math.random()).toString(32);return r.guidPrefix+e+(i++).toString(32)},addRuntime:function(e,t){return t.name=e,r.runtimes[e]=t,r.runtimes.push(t),t},ua:function(){var t,i,n,r=navigator,o=r.userAgent,a=r.vendor;return t=/WebKit/.test(o),n=t&&-1!==a.indexOf("Apple"),i=e.opera&&e.opera.buildNumber,{windows:-1!==navigator.platform.indexOf("Win"),ie:!t&&!i&&/MSIE/gi.test(o)&&/Explorer/gi.test(r.appName),webkit:t,gecko:!t&&/Gecko/.test(o),safari:n,opera:!!i}}(),mimeTypes:function(e){var t,i,n,r={},o=e.split(/,/);for(t=0;t<o.length;t+=2)for(n=o[t+1].split(/ /),i=0;i<n.length;i++)r[n[i]]=o[t];return r}("application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb,application/vnd.ms-powerpoint,ppt pps pot,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,application/vnd.openxmlformats-officedocument.presentationml.template,potx,application/vnd.openxmlformats-officedocument.presentationml.slideshow,ppsx,application/x-javascript,js,application/json,json,audio/mpeg,mpga mpega mp2 mp3,audio/x-wav,wav,audio/mp4,m4a,image/bmp,bmp,image/gif,gif,image/jpeg,jpeg jpg jpe,image/photoshop,psd,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/plain,asc txt text diff log,text/html,htm html xhtml,text/css,css,text/csv,csv,text/rtf,rtf,video/mpeg,mpeg mpg mpe,video/quicktime,qt mov,video/mp4,mp4,video/x-m4v,m4v,video/x-flv,flv,video/x-ms-wmv,wmv,video/avi,avi,video/webm,webm,video/vnd.rn-realvideo,rv,application/vnd.oasis.opendocument.formula-template,otf,application/octet-stream,exe"),buildUrl:function(e,t){var i="";return $.each(t,function(e,t){i+=(i?"&":"")+encodeURIComponent(e)+"="+encodeURIComponent(t)}),i&&(e+=(e.indexOf("?")>0?"&":"?")+i),e},addI18n:function(e){return $.extend(n,e)},translate:function(e){return n[e]||e}},o=function(e){this._map={},this.options=$.extend({trigger:null,dropElement:"",className:"",url:"/",file_data_name:"file",multipart_params:{},headers:[],multi_selection:!0,multipart:!0,filters:[],unique_names:"",chunk_size:0,max_file_size:4e6,max_file_count:0,required_features:"",runtimes:"",init:!1},e),this.progress=new u,this.files=[],this.id=r.guid(),this.state=r.STATE_STOPPED,this.runtime="",this.features={},this.timestamp=0,this.disabled=!1};o.prototype={init:function(){function e(){var t,s,u=o[a++];if(u){if(t=u.getFeatures(),s=n.required_features){s=s.split(",");for(var l=0,f=s.length;f>l;l++)if(!t[s[l]])return void e()}u.init(i,function(n){n&&n.success?(i.features=t,i.runtime=u.name,i.trigger(r.EVENT_INIT,{runtime:u.name}),i.trigger(r.EVENT_INIT_AFTER),i.refresh()):e()})}else i.trigger(r.EVENT_ERROR,{code:r.ERROR_INIT,message:r.translate("Init error.")})}var i=this,n=this.options;this.on(r.EVENT_FILES_ADD,function(e,i){var o,a,s=n.filters,u=0;s&&s.length&&(a=[],$.each(s,function(e,t){$.each(t.extensions.split(/,/),function(e,t){a.push(/^\s*\*\s*$/.test(t)?"\\.*":"\\."+t.replace(new RegExp("["+"/^$.*+?|()[]{}\\".replace(/./g,"\\$&")+"]","g"),"\\$&"))})}),a=new RegExp(a.join("|")+"$","i"));for(var l=0;l<i.length;l++)if(o=i[l],o.loaded=0,o.percent=0,o.status=r.STATE_QUEUED,!a||a.test(o.name))if(o.size!==t&&o.size>n.max_file_size)e.trigger(r.EVENT_ERROR,{code:r.ERROR_FILE_SIZE,message:r.translate("File size error."),file:o});else{if(n.max_file_count&&e.files.length>=n.max_file_count){e.trigger(r.EVENT_ERROR,{code:r.ERROR_FILE_COUNT,message:r.translate("File count error."),file:o});break}e.files.push(o),u++}else e.trigger(r.EVENT_ERROR,{code:r.ERROR_FILE_EXTENSION,message:r.translate("File extension error."),file:o});u&&setTimeout(function(){e.trigger(r.EVENT_QUEUE_CHANGE),e.refresh()},1)}),n.unique_names&&i.on(r.EVENT_FILE_UPLOAD_START,function(e,t){var i=t.name.match(/\.([^.]+)$/),n="tmp";i&&(n=i[1]),t.target_name=t.id+"."+n}),i.on(r.EVENT_FILE_UPLOAD_PROGRESS,function(e,t){t.percent=t.size>0?Math.ceil(t.loaded/t.size*100):100,e._updateProgress()}),i.on(r.EVENT_QUEUE_CHANGE,function(e){e._updateProgress(),e.start()}),i.on(r.EVENT_ERROR,function(e,t){t.file&&(t.file.status=r.STATE_FAILED,e._updateProgress(),e.state==r.STATE_STARTED&&setTimeout(function(){e._queueUpload.call(e)},1))}),i.on(r.EVENT_FILE_UPLOAD_COMPLETE,function(e,t){t.status=r.STATE_DONE,t.loaded=t.size,e.trigger(r.EVENT_FILE_UPLOAD_PROGRESS,t),setTimeout(function(){e._queueUpload()},1)});var o=[],a=0;if(n.runtimes)for(var s=n.runtimes.split(/\s?,\s?/),u=0,l=s.length;l>u;u++)r.runtimes[s[u]]&&o.push(r.runtimes[s[u]]);else o=r.runtimes;e(),n.init&&("function"==typeof n.init?n.init(i):$.each(n.init,function(e,t){i.on(e,t)}))},trigger:function(e){var t,i=Array.prototype.slice.call(arguments,0);i[0]=this;var n,r;if(n=this._map[e]){for(var o=[],a=0,s=n.length;s>a;a++)r=n[a],t=r.func.apply(r.scope,i),r.once&&o.push(r.func);if(o.length)for(a=0,s=o.length;s>a;a++)this.off(e,o[a])}return t!==!1},on:function(e,t,i,n){if("function"!=typeof t)return this;var r;return(r=this._map[e])||(this._map[e]=r=[]),r.push({func:t,scope:i||this,once:!!n}),this},once:function(e,t,i){return"function"!=typeof t?this:this.on(e,t,i,!0)},off:function(e,t){var i,n=-1;if(e)if(t){i=this._map[e];for(var r=0,o=i.length;o>r;r++)i[r].func===t&&(n=r);n>=0&&i.splice(n,1)}else this._map[e]=[];else this._map={};return this},_queueUpload:function(){var e,t=0;if(this.state==r.STATE_STARTED){for(var i=0,n=this.files.length;n>i;i++)e||this.files[i].status!=r.STATE_QUEUED?t++:(e=this.files[i],e.status=r.STATE_UPLOADING,this.trigger(r.EVENT_FILE_UPLOAD_BEFORE,e)&&this.trigger(r.EVENT_FILE_UPLOAD_START,e));t==this.files.length&&(this.stop(),this.trigger(r.EVENT_FILES_UPLOAD_COMPLETE,this.files))}},_updateProgress:function(){var e;this.progress.reset();for(var i=0,n=this.files.length;n>i;i++)e=this.files[i],e.size!==t?(this.progress.size+=e.size,this.progress.loaded+=e.loaded):this.progress.size=t,e.status==r.STATE_DONE?this.progress.uploaded++:e.status==r.STATE_FAILED?this.progress.failed++:this.progress.queued++;this.progress.size===t?this.progress.percent=this.files.length>0?Math.ceil(this.progress.uploaded/this.files.length*100):0:(this.progress.bytesPerSec=Math.ceil(this.progress.loaded/((+new Date-this.timestamp||1)/1e3)),this.progress.percent=this.progress.size>0?Math.ceil(this.progress.loaded/this.progress.size*100):0)},refresh:function(){this.trigger(r.EVENT_REFRESH)},start:function(){this.files.length&&this.state!=r.STATE_STARTED&&(this.state=r.STATE_STARTED,this.timestamp=+new Date,this.trigger(r.EVENT_START),this._queueUpload())},stop:function(){if(this.state!=r.STATE_STOPPED){this.state=r.STATE_STOPPED;for(var e=this.files.length-1;e>=0;e--)this.files[e].status==r.STATE_UPLOADING&&(this.files[e].status=r.STATE_QUEUED,this._updateProgress());this.trigger(r.EVENT_FILE_UPLOAD_CANCEL),this.trigger(r.EVENT_STOP)}},disableBrowse:function(){this.disabled=arguments[0]!==t?arguments[0]:!0,this.trigger(r.EVENT_BROWSE_DISABLE,this.disabled)},getFile:function(e){for(var t,i=this.files.length-1;t=this.files[i--];)if(t.id===e)return t},removeFile:function(e){for(var t=this.files.length-1;t>=0;t--)if(this.files[t].id===e)return this.splice(t,1)[0]},splice:function(e,i){var n=this.files.splice(e===t?0:e,i===t?this.files.length:i);return this.trigger(r.EVENT_FILES_REMOVE,n),this.trigger(r.EVENT_QUEUE_CHANGE),n},dispose:function(){this.stop(),this.trigger(r.EVENT_DISPOSE),this.off(),this.supr()}};var a=function(e,t,i){this.id=e,this.name=t,this.size=i,this.loaded=0,this.percent=0,this.status=0},s={getFeatures:function(){},init:function(){}},u=function(){var e=this;e.size=0,e.loaded=0,e.uploaded=0,e.failed=0,e.queued=0,e.percent=0,e.bytesPerSec=0,e.reset=function(){e.size=e.loaded=e.uploaded=e.failed=e.queued=e.percent=e.bytesPerSec=0}};r.File=a,r.Uploader=o,r.Runtime=s,e.lupload=r}(window),+function(e,t,i,n){function r(t,i){var n;return"FileReader"in e?(n=new FileReader,n.readAsDataURL(t),void(n.onload=function(){i(n.result)})):i(t.getAsDataURL())}function o(t,i){var n;return"FileReader"in e?(n=new FileReader,n.readAsBinaryString(t),void(n.onload=function(){i(n.result)})):i(t.getAsBinary())}function a(e,i,n,o){var a,s,f,d;r(p[e.id],function(e){a=t.createElement("canvas"),a.style.display="none",t.body.appendChild(a),s=a.getContext("2d"),f=new Image,f.onerror=f.onabort=function(){o({success:!1})},f.onload=function(){var t,r,p,c;if(i.width||(i.width=f.width),i.height||(i.height=f.height),d=Math.min(i.width/f.width,i.height/f.height),1>d||1===d&&"image/jpeg"===n){if(t=Math.round(f.width*d),r=Math.round(f.height*d),a.width=t,a.height=r,s.drawImage(f,0,0,t,r),"image/jpeg"===n){if(p=new u(atob(e.substring(e.indexOf("base64,")+7))),p.headers&&p.headers.length&&(c=new l,c.init(p.get("exif")[0])&&(c.setExif("PixelXDimension",t),c.setExif("PixelYDimension",r),p.set("exif",c.getBinary()))),i.quality)try{e=a.toDataURL(n,i.quality/100)}catch(E){e=a.toDataURL(n)}}else e=a.toDataURL(n);e=e.substring(e.indexOf("base64,")+7),e=atob(e),p&&p.headers&&p.headers.length&&(e=p.restore(e),p.purge()),a.parentNode.removeChild(a),o({success:!0,data:e})}else o({success:!1})},f.src=e})}function s(){function e(e,t){var i,n=o?0:-8*(t-1),a=0;for(i=0;t>i;i++)a|=r.charCodeAt(e+i)<<Math.abs(n+8*i);return a}function t(e,t,i){var i=3===arguments.length?i:r.length-t-1;r=r.substr(0,t)+e+r.substr(i+t)}function i(e,i,n){var r,a="",s=o?0:-8*(n-1);for(r=0;n>r;r++)a+=String.fromCharCode(i>>Math.abs(s+8*r)&255);t(a,e,n)}var r,o=!1;return{II:function(e){return e===n?o:void(o=e)},init:function(e){o=!1,r=e},SEGMENT:function(e,i,n){switch(arguments.length){case 1:return r.substr(e,r.length-e-1);case 2:return r.substr(e,i);case 3:t(n,e,i);break;default:return r}},BYTE:function(t){return e(t,1)},SHORT:function(t){return e(t,2)},LONG:function(t,r){return r===n?e(t,4):void i(t,r,4)},SLONG:function(t){var i=e(t,4);return i>2147483647?i-4294967296:i},STRING:function(t,i){var n="";for(i+=t;i>t;t++)n+=String.fromCharCode(e(t,1));return n}}}function u(e){var t,i,r,o={65505:{app:"EXIF",name:"APP1",signature:"Exif\x00"},65506:{app:"ICC",name:"APP2",signature:"ICC_PROFILE\x00"},65517:{app:"IPTC",name:"APP13",signature:"Photoshop 3.0\x00"}},a=[],l=n,f=0;if(t=new s,t.init(e),65496===t.SHORT(0)){for(i=2,r=Math.min(1048576,e.length);r>=i;)if(l=t.SHORT(i),l>=65488&&65495>=l)i+=2;else{if(65498===l||65497===l)break;f=t.SHORT(i+2)+2,o[l]&&t.STRING(i+4,o[l].signature.length)===o[l].signature&&a.push({hex:l,app:o[l].app.toUpperCase(),name:o[l].name.toUpperCase(),start:i,length:f,segment:t.SEGMENT(i,f)}),i+=f}return t.init(null),{headers:a,restore:function(e){t.init(e);var n=new u(e);if(!n.headers)return!1;for(var r=n.headers.length;r>0;r--){var o=n.headers[r-1];t.SEGMENT(o.start,o.length,"")}n.purge(),i=65504==t.SHORT(2)?4+t.SHORT(4):2;for(var r=0,s=a.length;s>r;r++)t.SEGMENT(i,0,a[r].segment),i+=a[r].length;return t.SEGMENT()},get:function(e){for(var t=[],i=0,n=a.length;n>i;i++)a[i].app===e.toUpperCase()&&t.push(a[i].segment);return t},set:function(e,t){var i=[];"string"==typeof t?i.push(t):i=t;for(var n=0,r=0,o=a.length;o>n&&(a[n].app===e.toUpperCase()&&(a[n].segment=i[r],a[n].length=i[r].length,r++),!(r>=i.length));n++);},purge:function(){a=[],t.init(null)}}}}function l(){function e(e,t){var i,o,s,l,f,p,d,c,E=r.SHORT(e),h=[],g={};for(i=0;E>i;i++)if(d=p=e+12*i+2,s=t[r.SHORT(d)],s!==n){switch(l=r.SHORT(d+=2),f=r.LONG(d+=2),d+=4,h=[],l){case 1:case 7:for(f>4&&(d=r.LONG(d)+u.tiffHeader),o=0;f>o;o++)h[o]=r.BYTE(d+o);break;case 2:f>4&&(d=r.LONG(d)+u.tiffHeader),g[s]=r.STRING(d,f-1);continue;case 3:for(f>2&&(d=r.LONG(d)+u.tiffHeader),o=0;f>o;o++)h[o]=r.SHORT(d+2*o);break;case 4:for(f>1&&(d=r.LONG(d)+u.tiffHeader),o=0;f>o;o++)h[o]=r.LONG(d+4*o);break;case 5:for(d=r.LONG(d)+u.tiffHeader,o=0;f>o;o++)h[o]=r.LONG(d+4*o)/r.LONG(d+4*o+4);break;case 9:for(d=r.LONG(d)+u.tiffHeader,o=0;f>o;o++)h[o]=r.SLONG(d+4*o);break;case 10:for(d=r.LONG(d)+u.tiffHeader,o=0;f>o;o++)h[o]=r.SLONG(d+4*o)/r.SLONG(d+4*o+4);break;default:continue}c=1==f?h[0]:h,g[s]=a.hasOwnProperty(s)&&"object"!=typeof c?a[s][c]:c}return g}function t(){var t=n,i=u.tiffHeader;return r.II(18761==r.SHORT(i)),42!==r.SHORT(i+=2)?!1:(u.IFD0=u.tiffHeader+r.LONG(i+=2),t=e(u.IFD0,o.tiff),u.exifIFD="ExifIFDPointer"in t?u.tiffHeader+t.ExifIFDPointer:n,u.gpsIFD="GPSInfoIFDPointer"in t?u.tiffHeader+t.GPSInfoIFDPointer:n,!0)}function i(e,t,i){var n,a,s,l,f=0;if("string"==typeof t){var p=o[e.toLowerCase()];for(var d in p)if(p[d]===t){t=d;break}}for(a=u[e.toLowerCase()+"IFD"],s=r.SHORT(a),n=0;s>n;n++)if(l=a+12*n+2,r.SHORT(l)==t){f=l+8;break}return f?(r.LONG(f,i),!0):!1}var r,o,a,u={};return r=new s,o={tiff:{274:"Orientation",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer"},exif:{36864:"ExifVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",36867:"DateTimeOriginal",33434:"ExposureTime",33437:"FNumber",34855:"ISOSpeedRatings",37377:"ShutterSpeedValue",37378:"ApertureValue",37383:"MeteringMode",37384:"LightSource",37385:"Flash",41986:"ExposureMode",41987:"WhiteBalance",41990:"SceneCaptureType",41988:"DigitalZoomRatio",41992:"Contrast",41993:"Saturation",41994:"Sharpness"},gps:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude"}},a={ColorSpace:{1:"sRGB",0:"Uncalibrated"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{1:"Daylight",2:"Fliorescent",3:"Tungsten",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 -5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire.",1:"Flash fired.",5:"Strobe return light not detected.",7:"Strobe return light detected.",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},ExposureMode:{0:"Auto exposure",1:"Manual exposure",2:"Auto bracket"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},GPSLatitudeRef:{N:"North latitude",S:"South latitude"},GPSLongitudeRef:{E:"East longitude",W:"West longitude"}},{init:function(e){return u={tiffHeader:10},e!==n&&e.length?(r.init(e),65505===r.SHORT(0)&&"EXIF\x00"===r.STRING(4,5).toUpperCase()?t():!1):!1},EXIF:function(){var t;if(t=e(u.exifIFD,o.exif),t.ExifVersion&&"array"===c.typeOf(t.ExifVersion)){for(var i=0,n="";i<t.ExifVersion.length;i++)n+=String.fromCharCode(t.ExifVersion[i]);t.ExifVersion=n}return t},GPS:function(){var t;return t=e(u.gpsIFD,o.gps),t.GPSVersionID&&(t.GPSVersionID=t.GPSVersionID.join(".")),t},setExif:function(e,t){return"PixelXDimension"!==e&&"PixelYDimension"!==e?!1:i("exif",e,t)},getBinary:function(){return r.SEGMENT()}}}var f,p={};i.runtimes.Html5=i.addRuntime("html5",{getFeatures:function(){var n,r,o,a,s,u;return r=o=s=u=!1,e.XMLHttpRequest&&(n=new XMLHttpRequest,o=!!n.upload,r=!(!n.sendAsBinary&&!n.upload)),r&&(a=!!(n.sendAsBinary||e.Uint8Array&&e.ArrayBuffer),s=!(!File||!File.prototype.getAsDataURL&&!e.FileReader||!a),u=!(!File||!(File.prototype.mozSlice||File.prototype.webkitSlice||File.prototype.slice))),f=i.ua.safari&&i.ua.windows,{html5:r,dragdrop:function(){var e=t.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e}(),jpgresize:s,pngresize:s,multipart:s||!!e.FileReader||!!e.FormData,canSendBinary:a,cantSendBlobInFormData:!(!(i.ua.gecko&&e.FormData&&e.FileReader)||FileReader.prototype.readAsArrayBuffer),progress:o,chunks:u,multi_selection:!(i.ua.safari&&i.ua.windows),triggerDialog:i.ua.gecko&&e.FormData||i.ua.webkit}},init:function(n,r){function s(e){return e+"."+n.id}function u(e){for(var t,r,o=[],a={},s=0,u=e.length;u>s;s++)t=e[s],a[t.name]||(a[t.name]=!0,r=i.guid(),p[r]=t,o.push(new i.File(r,t.fileName||t.name,t.fileSize||t.size)));o.length&&n.trigger(i.EVENT_FILES_ADD,o)}var l,d;l=this.getFeatures(),l.html5?(n.on(i.EVENT_INIT,function(e){var n,r,o,a,l,f,p,d=[],c=e.options,E=e.options.filters,h=$(t.body);n=$('<div id="'+e.id+'_html5_container" />'),c.className&&n.addClass(c.className),n.css({position:"absolute",background:"transparent",overflow:"hidden",top:0,left:0,width:"100%",height:"100%",opacity:0}),n.addClass("lupload html5"),c.container&&(h=$(c.container),"static"===h.css("position")&&h.css("position","relative")),h.append(n);e:for(o=0;o<E.length;o++)for(l=E[o].extensions.split(/,/),a=0;a<l.length;a++){if("*"===l[a]){d=[];break e}f=i.mimeTypes[l[a]],f&&-1===$.inArray(f,d)&&d.push(f)}p=$('<input id="'+e.id+'_html5"  style="font-size:999px" type="file" accept="'+d.join(",")+'" '+(e.options.multi_selection&&e.features.multi_selection?'multiple="multiple"':"")+" />").appendTo(n.scrollTop(100)),e.features.triggerDialog?p.css({position:"absolute",left:0,width:"100%",height:"100%"}):p.css("float","right"),p.on("change",function(){u(this.files),$(this).val("")}),r=$(c.trigger),r.size()&&e.features.triggerDialog&&r.on(s("click"),function(t){var i=$("#"+e.id+"_html5");i.size()&&!i.is(":disabled")&&i.trigger("click"),t.preventDefault()})}),n.on(i.EVENT_INIT_AFTER,function(){var e=$(n.options.dropElement);if(e.size()){if(f)return void e.on(s("dragenter"),function(){var t;t=$("#"+n.id+"_drop"),t.size()||(t=$('<input type="file" id="'+n.id+'_drop" '+(n.options.multi_selection&&n.features.multi_selection?'multiple="multiple"':"")+" />"),t.on(s("change"),function(){u(this.files),t.off(s("change")),t.remove()}),e.append(t)),"static"===e.css("position")&&e.css({position:"relative"}),t.css({position:"absolute",display:"block",top:0,left:0,width:(e[0].offsetWidth||e[0].clientWidth)+"px",height:(e[0].offsetHeight||e[0].clientHeight)+"px",opacity:0})});e.on(s("dragover"),function(e){e.preventDefault()}),e.on(s("drop"),function(e){var t=e.originalEvent.dataTransfer;t&&t.files&&u(t.files),e.preventDefault()})}}),n.on(i.EVENT_REFRESH,function(e){}),n.on(i.EVENT_BROWSE_DISABLE,function(e,t){var i=$("#"+e.id+"_html5");i.size()&&i.prop("disabled",t)}),n.on(i.EVENT_FILE_UPLOAD_CANCEL,function(){d&&d.abort&&d.abort()}),n.on(i.EVENT_FILE_UPLOAD_START,function(t,n){function r(e,t,i){var n;if(!File.prototype.slice)return(n=File.prototype.webkitSlice||File.prototype.mozSlice)?n.call(e,t,i):null;try{return e.slice(),e.slice(t,i)}catch(r){return e.slice(t,i-t)}}function s(o){function a(){function c(r){var o,u=0,p="----luploadboundary"+i.guid(),c="--",R="\r\n",v="";if(d=new XMLHttpRequest,d.upload&&(d.upload.onprogress=function(e){n.loaded=Math.min(n.size,f+e.loaded-u),t.trigger(i.EVENT_FILE_UPLOAD_PROGRESS,n)}),d.onreadystatechange=function(){var e,r;if(4==d.readyState&&t.state!==i.STATE_STOPPED){try{e=d.status}catch(u){e=0}if(e>=400)t.trigger(i.EVENT_ERROR,{code:i.ERROR_HTTP,message:i.translate("HTTP Error."),file:n,status:e});else{if(h){if(r={chunk:s,chunks:h,response:d.responseText,status:e,canceled:!1},t.trigger(i.EVENT_FILE_UPLOAD_CHUNK,n,r),f+=_,r.canceled)return void(n.status=i.STATE_FAILED);n.loaded=Math.min(n.size,(s+1)*m)}else n.loaded=n.size;if(t.trigger(i.EVENT_FILE_UPLOAD_PROGRESS,n),u=E=o=v=null,!h||++s>=h){n.status=i.STATE_DONE;var l=d.responseText;try{l=$.parseJSON(l)}catch(u){}t.trigger(i.EVENT_FILE_UPLOAD_COMPLETE,n,l)}else a()}}},t.options.multipart&&l.multipart){if(g.name=n.target_name||n.name,d.open("post",S,!0),$.each(t.options.headers,function(e,t){d.setRequestHeader(e,t)}),"string"!=typeof r&&e.FormData)return o=new FormData,$.each($.extend(g,t.options.multipart_params),function(e,t){o.append(e,t)}),o.append(t.options.file_data_name,r),void d.send(o);if("string"==typeof r){if(d.setRequestHeader("Content-Type","multipart/form-data; boundary="+p),$.each($.extend(g,t.options.multipart_params),function(e,t){v+=c+p+R+'Content-Disposition: form-data; name="'+e+'"'+R+R,v+=unescape(encodeURIComponent(t))+R}),T=i.mimeTypes[n.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream",v+=c+p+R+'Content-Disposition: form-data; name="'+t.options.file_data_name+'"; filename="'+unescape(encodeURIComponent(n.name))+'"'+R+"Content-Type: "+T+R+R+r+R+c+p+c+R,u=v.length-r.length,r=v,d.sendAsBinary)d.sendAsBinary(r);else if(l.canSendBinary){for(var O=new Uint8Array(r.length),N=0;N<r.length;N++)O[N]=255&r.charCodeAt(N);d.send(O.buffer)}return}}S=i.buildUrl(t.options.url,$.extend(g,t.options.multipart_params)),d.open("post",S,!0),d.setRequestHeader("Content-Type","application/octet-stream"),$.each(t.options.headers,function(e,t){d.setRequestHeader(e,t)}),d.send(r)}var E,h,g,m,_,T,S=t.options.url;n.status!=i.STATE_DONE&&n.status!=i.STATE_FAILED&&t.state!=i.STATE_STOPPED&&(g={name:n.target_name||n.name},u.chunk_size&&n.size>u.chunk_size&&(l.chunks||"string"==typeof o)?(m=u.chunk_size,h=Math.ceil(n.size/m),_=Math.min(m,n.size-s*m),E="string"==typeof o?o.substring(s*m,s*m+_):r(o,s*m,s*m+_),g.chunk=s,g.chunks=h):(_=n.size,E=o),t.options.multipart&&l.multipart&&"string"!=typeof E&&p&&l.cantSendBlobInFormData&&l.chunks&&t.options.chunk_size?(p.onload=function(){c(p.result)},p.readAsBinaryString(E)):c(E))}var s=0,f=0,p="FileReader"in e?new FileReader:null;a()}var u=t.options,f=p[n.id];l.jpgresize&&t.options.resize&&/\.(png|jpg|jpeg)$/i.test(n.name)?a.call(t,n,t.options.resize,/\.png$/i.test(n.name)?"image/png":"image/jpeg",function(e){e.success?(n.size=e.data.length,s(e.data)):l.chunks?s(f):o(f,s)}):!l.chunks&&l.jpgresize?o(f,s):s(f)}),n.on(i.EVENT_DISPOSE,function(e){var i,n,r={inputContainer:"#"+e.id+"_html5_container",inputFile:"#"+e.id+"_html5",browseButton:e.options.trigger,dropElm:e.options.dropElement};for(i in r)n=$(r[i]),n.size()&&n.off("."+e.id);$(t.body).off("."+e.id),$(r.inputContainer).remove()}),r({success:!0})):r({success:!1})}})}(window,document,lupload),+function(e,t,i){i.runtimes.Html4=i.addRuntime("html4",{getFeatures:function(){return{multipart:!0,triggerDialog:i.ua.gecko&&e.FormData||i.ua.webkit}},init:function(e,n){e.on(i.EVENT_INIT,function(){function n(){var t,r,o;s=i.guid(),p.push(s),t=$("<form />"),t.attr({id:"form_"+s,method:"post",enctype:"multipart/form-data",encoding:"multipart/form-data",target:e.id+"_iframe"}),t.css("position","absolute"),r=$("<input />"),r.attr({id:"input_"+s,type:"file",accept:c,size:1}),o=$(e.options.trigger),e.features.triggerDialog&&o.size()&&o.on(h("click"),function(e){return $(this).is(":disabled")||r.trigger("click"),e.preventDefault(),!1}),r.css({width:"100%",height:"100%",opacity:0,fontSize:"99px",cursor:"pointer"}),t.css({position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"hidden"}),d&&r.css({filter:"alpha(opacity=0)"}),r.on(h("change"),function(t){var a,u=t.target,l=[];u.value&&($("#form_"+s).css("top","-1048575px"),a=u.value.replace(/\\/g,"/"),a=a.substring(a.length,a.lastIndexOf("/")+1),l.push(new i.File(s,a)),e.features.triggerDialog&&o.off(h("click")),r.off(h("change")),n(),l.length&&e.trigger(i.EVENT_FILES_ADD,l))}),t.append(r),$(e.options.container||f).eq(0).append(t),e.refresh()}function r(){o=$('<iframe id="'+e.id+'_iframe" name="'+e.id+'_iframe" src="javascript:false;" style="display:none"></iframe>'),$(f).append(o),o.on(h("load"),function(){var t;if(a){try{t=$(this).contents().find("body").html()}catch(n){return void e.trigger(i.EVENT_ERROR,{code:i.ERROR_SECURITY,message:i.translate("Security error."),file:a})}try{t=$.parseJSON(t)}catch(n){}t&&(a.status=i.STATE_DONE,a.loaded=1025,a.percent=100,e.trigger(i.EVENT_FILE_UPLOAD_PROGRESS,a),e.trigger(i.EVENT_FILE_UPLOAD_COMPLETE,a,t))}})}var o,a,s,u,l,f=t.body,p=[],d=/MSIE/.test(navigator.userAgent),c=[],E=e.options.filters,h=function(e){return e+"."+s};e:for(var g=0;g<E.length;g++){var m=E[g].extensions.split(/,/);for(l=0;l<m.length;l++){if("*"===m[l]){c=[];break e}u=i.mimeTypes[m[l]],u&&-1===$.inArray(u,c)&&c.push(u)}}if(c=c.join(","),e.options.container){var _=$(e.options.container);"static"===_.css("position")&&_.css("position","relative")}e.on(i.EVENT_FILE_UPLOAD_START,function(t,n){var r,o;n.status!=i.STATE_DONE&&n.status!=i.STATE_FAILED&&e.state!=i.STATE_STOPPED&&(r=$("#form_"+n.id),o=$("#input_"+n.id),o.attr("name",e.options.file_data_name),r.attr("action",e.options.url),$.each($.extend({name:n.target_name||n.name},e.options.multipart_params),function(e,t){var i=$('<input type="hidden" name="'+e+'" value="'+t+'"/>');r.prepend(i)}),a=n,r.css("top","-1048575px"),r[0].submit())}),e.on(i.EVENT_FILE_UPLOAD_COMPLETE,function(){e.refresh()}),e.on(i.EVENT_FILES_REMOVE,function(e,t){var i,n;for(i=0;i<t.length;i++)n=$("#form_"+t[i].id),n.size()&&n.remove()}),e.on(i.EVENT_BROWSE_DISABLE,function(e,t){var i=$("#input_"+s);i.length&&i.prop("disabled",t)}),e.on(i.EVENT_START,function(){r(),$.each(e.files,function(e,t){if(t.status===i.STATE_DONE||t.status===i.STATE_FAILED){var n=$("#form_"+t.id);n.size()&&n.remove()}})}),e.on(i.EVENT_STOP,function(){setTimeout(function(){o.off(h("load")),o.size()&&o.remove()},0),$.each(e.files,function(e,t){if(t.status===i.STATE_DONE||t.status===i.STATE_FAILED){var n=$("#form_"+t.id);n.size()&&n.remove()}})}),e.on(i.EVENT_DISPOSE,function(){$.each(p,function(e,t){var i=$("#form_"+t);i.size()&&i.remove()})}),n()}),n({success:!0})}})}(window,document,lupload),+function(){lupload.addI18n({"File size error.":"上传的文件太大了~","File count error.":"上传的文件数量太多了~","File extension error.":"上传的文件格式不正确","Init error.":"可能暂时上传不了图片哦，请更换浏览器试试","Security error.":"可能暂时上传不了图片哦，请更换浏览器试试","HTTP Error.":"上传失败，是不是网络挂起了？"})}(lupload);